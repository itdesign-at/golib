package converter

import "testing"

func TestNewMessenger_prepareMobileNumber(t *testing.T) {
	var valid = map[interface{}]string{
		"00496642304555":         "00496642304555",
		"436642304555":           "00436642304555",
		"+496642394455":          "00496642394455",
		"+436642394455":          "00436642394455",
		"[+43 664 239 44 55]":    "00436642394455",
		"+43 664 239 44 55":      "00436642394455",
		" +43 664 239 4 4 5 5 ":  "00436642394455",
		"00436642394455":         "00436642394455",
		"0043 664 239 44 55":     "00436642394455",
		" 0043 664 239 4 4 5 5 ": "00436642394455",
		" 0664 239 4 4 5 5 ":     "00436642394455",
		+436642394455:            "00436642394455",
		836642394455:             "00836642394455",
		436642394455.0:           "00436642394455",
		6642394455.0:             "00436642394455",
		496642394455.0:           "00496642394455",
		00496642394456.0:         "00496642394456",
	}
	for send, expect := range valid {
		ret, err := PrepareMobileNumber(send)
		if err != nil {
			t.Errorf("send: %v but got error: %s", send, err.Error())
			continue
		}
		if ret != expect {
			t.Errorf("send: %v but got: %s", send, ret)
		}
	}
}
